<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Coast Fi Calculator</title>

<style>
body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    max-width: 420px;
    margin: 0 auto;
    padding: 16px;
    background: #fafafa;
}
h1 { text-align:center; }

.section {
    background:white;
    padding:16px;
    margin-bottom:20px;
    border-radius:14px;
    box-shadow:0 4px 12px rgba(0,0,0,0.06);
}

.locked { color:#b00000; }
.flex { color:#0b6b0b; }

label {
    margin-top:12px;
    display:block;
    font-weight:600;
}

.input-row {
    display:flex;
    align-items:center;
    gap:8px;
    margin-top:6px;
}

input {
    flex:1;
    padding:12px;
    font-size:1rem;
    border-radius:10px;
    border:1px solid #ccc;
    -moz-appearance:textfield;
}
input::-webkit-inner-spin-button,
input::-webkit-outer-spin-button {
    -webkit-appearance:none;
}

.info {
    min-width:36px;
    height:36px;
    border-radius:50%;
    background:#e0e0e0;
    text-align:center;
    font-weight:bold;
    line-height:36px;
    cursor:pointer;
    user-select:none;
}

button {
    height:52px;
    border:none;
    border-radius:12px;
    font-size:1rem;
    cursor:pointer;
}
button:active { transform:scale(0.98); }

.presets, .buttons {
    display:flex;
    gap:12px;
    margin-top:14px;
}
.presets button, .buttons button { flex:1; }

.btn-calc { background:#2e7d32; color:white; }
.btn-reset { background:#c62828; color:white; }

.btn-conservative { background:#c8e6c9; }
.btn-normal { background:#bbdefb; }
.btn-optimistic { background:#ffcdd2; }

.result {
    display:none;
    background:white;
    padding:16px;
    border-radius:14px;
    box-shadow:0 4px 12px rgba(0,0,0,0.06);
}

.ok { color:#2e7d32; font-weight:bold; }
.warn { color:#b00000; font-weight:bold; }
.small { margin-top:10px; font-size:0.9rem; color:#444; }
hr { border:none; border-top:1px solid #ddd; margin:12px 0; }

/* Info popup */
.info-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.4);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.info-popup {
    background: white;
    border-radius: 16px;
    padding: 20px;
    max-width: 320px;
    width: 90%;
    box-shadow: 0 8px 24px rgba(0,0,0,0.2);
}

.info-popup h3 {
    margin-top: 0;
    font-size: 1.1rem;
}

.info-popup p {
    font-size: 0.95rem;
    line-height: 1.4;
    color: #333;
}

.info-popup button {
    margin-top: 16px;
    width: 100%;
    height: 44px;
    border-radius: 10px;
    border: none;
    background: #2e7d32;
    color: white;
    font-size: 1rem;
}
</style>
</head>

<body>

<h1>Coast Fi Calculator</h1>

<div class="section">
<label>Nåværende alder</label>
<div class="input-row">
<input id="currentAge" inputmode="numeric">
<span class="info" onclick="showInfo(
'Alderen du er i dag, i hele år. Brukes til å beregne hvor mange år kapitalen får vokse før pensjon.',
'Nåværende alder'
)">i</span>
</div>

<label>Alder du vil sjekke</label>
<div class="input-row">
<input id="targetAge" inputmode="numeric" value="62">
<span class="info" onclick="showInfo(
'Alderen du ønsker å vurdere COAST FI. Kalkulatoren sjekker om kapitalen rekker frem til denne alderen.',
'Målalder'
)">i</span>
</div>
</div>

<div class="section locked">
<h3>Låst kapital (62+)</h3>

<label>IPS – saldo i dag</label>
<div class="input-row">
<input id="ipsBalance" inputmode="numeric">
<span class="info" onclick="showInfo(
'TOTAL verdi på IPS-kontoen i dag. Ikke inkluder fremtidige innskudd eller avkastning.',
'IPS'
)">i</span>
</div>

<label>Årlig NAV-pensjon (etter skatt)</label>
<div class="input-row">
<input id="navPension" inputmode="numeric">
<span class="info" onclick="showInfo(
'Årlig utbetaling fra NAV i dagens kroner, etter skatt. Kan stå tomt hvis du ikke vil ta det med.',
'NAV-pensjon'
)">i</span>
</div>
</div>

<div class="section flex">
<h3>Fleksibel kapital</h3>

<label>Fond og aksjer</label>
<div class="input-row">
<input id="freeCapital" inputmode="numeric">
<span class="info" onclick="showInfo(
'Verdien av fond, ASK og enkeltaksjer i dag. Ikke ta med bankkonto eller IPS.',
'Fond og aksjer'
)">i</span>
</div>

<label>Langsiktig bankinnskudd</label>
<div class="input-row">
<input id="bankSavings" inputmode="numeric">
<span class="info" onclick="showInfo(
'Penger på bankkonto som er ment for langsiktig bruk, ikke buffer.',
'Bankinnskudd'
)">i</span>
</div>
</div>

<div class="section">
<label>Ønsket årlig forbruk (etter skatt)</label>
<div class="input-row">
<input id="annualSpendingNet" inputmode="numeric" value="400000">
<span class="info" onclick="showInfo(
'Hva du ønsker å bruke per år i pensjon, i dagens kroner, etter skatt.',
'Forbruk'
)">i</span>
</div>

<label>Forventet realavkastning (%)</label>
<div class="input-row">
<input id="returnRate" inputmode="numeric" value="5">
<span class="info" onclick="showInfo(
'Avkastning etter inflasjon. Bruk konservative tall for bedre robusthet.',
'Avkastning'
)">i</span>
</div>

<div class="presets">
<button class="btn-conservative" onclick="setReturn(3)">Konservativ</button>
<button class="btn-normal" onclick="setReturn(5)">Normal</button>
<button class="btn-optimistic" onclick="setReturn(7)">Optimistisk</button>
</div>

<label>Uttaksrate (%)</label>
<div class="input-row">
<input id="withdrawRate" inputmode="numeric" value="4">
<span class="info" onclick="showInfo(
'Hvor stor andel av kapitalen du planlegger å ta ut per år i pensjon.',
'Uttaksrate'
)">i</span>
</div>
</div>

<div class="buttons">
<button class="btn-calc" onclick="calculate()">Beregn</button>
<button class="btn-reset" onclick="resetForm()">Nullstill</button>
</div>

<div class="result" id="result"></div>

<!-- Info popup -->
<div class="info-overlay" id="infoOverlay" onclick="closeInfo()">
  <div class="info-popup" onclick="event.stopPropagation()">
    <h3 id="infoTitle"></h3>
    <p id="infoText"></p>
    <button onclick="closeInfo()">Lukk</button>
  </div>
</div>

<script>
function showInfo(text, title){
  document.getElementById("infoTitle").innerText = title;
  document.getElementById("infoText").innerText = text;
  document.getElementById("infoOverlay").style.display = "flex";
}
function closeInfo(){
  document.getElementById("infoOverlay").style.display = "none";
}
</script>

</body>
</html>
